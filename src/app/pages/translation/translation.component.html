<navbar [items]="navBarItems"></navbar>

<app-translation-title (finish)="closeConversation()"></app-translation-title>
<div class="interfaces">
  <div class="msg">
    <app-message-wrapper user="advisor" class="margin" 
    (rawTextToEmit)="getMessage($event)" 
    (translatedTextToEmit)="getTranslation($event)" 
    (translatedSpeechToEmit)="getTranslatedSpeech($event)"
    (languageToEmit)="getLanguage($event)"
    [rawText]="messageToEdit">
  </app-message-wrapper>
    <app-message-wrapper user="guest" class="margin" 
    (rawTextToEmit)="getMessage($event)" 
    (translatedTextToEmit)="getTranslation($event)"
    (languageToEmit)="getLanguage($event)"
    ></app-message-wrapper>
  </div>
  <div class="conversation">
    <div class="head-conversation">
      <h2>Conversation</h2>
      <div class="auto-listen">
        <a href="#">Ecouter automatiquement</a><mat-slide-toggle></mat-slide-toggle>
      </div>
    </div>
    <div class="thread">
      <ng-container *ngFor="let message of messages; let i = index">
          <div class="value">
            <div class="translation" *ngIf="!isSendToEdit">
              {{ message.translation }}
            </div>
            <button class="listen" (click)="listen('translation')" *ngIf=(message.translation)>
              <img src="../../../assets/icons/icon-listen-black.svg" alt="listen translation">
            </button>
          </div>
          <div class="entered-text" *ngIf="message.translation">
            <div class="flag">
              <span class="flag-icon flag-icon-{{ message.language }}" routerLink="/choice"></span>
            </div>
            <div class="text" *ngIf="message.translation">
              <span *ngIf="!showLongMessage && !isSendToEdit">
                <a (click)="editMessage(message.message)">{{ message.message }}</a>&nbsp;
                <span *ngIf="message.message && message.message.length >= 120"><a (click)="showLongText(message.message)">...</a></span>
              </span>
              <span *ngIf="showLongMessage">
                <a (click)="editMessage($event , message.longMessage)">{{ message.longMessage }}</a>&nbsp;
                <button *ngIf="message.longMessag" (click)="sliceText(message.longMessage)">RÃ©duire</button>
              </span>
              </div>
            <div class="delete" (click)="deleteMessage()">
              <img src="./assets/icons/icon-delete-black.svg" alt="delete text" />
            </div>
          </div>
      </ng-container>
    </div>
  </div>
</div>
