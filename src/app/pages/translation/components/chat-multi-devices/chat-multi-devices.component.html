<ng-container *ngFor="let input of messagesWrapped; let i = index">
  <ng-template [ngIf]="input.notification === undefined">
    <div [ngClass]="input.isSender ? 'bubble-sender-area' : 'bubble-receiver-area'">
      <div [ngClass]="input.isSender ? 'sender' : 'receiver'">
        <div *ngIf="input.message.role === 'DE'; then user; else advisor"></div>
        <ng-template #user>
          <div class="bubbleTitle">
            <span *ngIf="input.message.flag !== 'xa'" class="flag-icon flag-icon-{{ input.message.flag }}"></span>
            <img *ngIf="input.message.flag === 'xa'" class="flag-icon" src="assets/images/arab-flag.png" alt="drapeau" />
            <span>&nbsp;{{ input.message.member }}</span>
          </div>
        </ng-template>
        <ng-template #advisor>
          <div class="bubbleTitle">
            <img src="../../../../../assets/icons/logo-pe.svg" alt="pole emploi" class="logo" />
            <span>&nbsp;{{ peTitle }}</span>
          </div>
        </ng-template>
        <div class="messageTranslated">
          <bdi>{{ input.message.translation }}</bdi>
        </div>
      </div>
      <div class="listen" (click)="listen(i)" *ngIf="input.message.audioHtml"></div>
    </div>
  </ng-template>
  <ng-template [ngIf]="input.notification">
    <div class="notification">{{ input.notification.message }}</div>
  </ng-template>
</ng-container>
