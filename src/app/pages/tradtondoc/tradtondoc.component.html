<div class="wrapper">
  <div class="header">
    <button class="end-btn" (click)="evaluate()">TERMINER LA TRADUCTION</button>
  </div>
  <div class="container">
    <form class="tradtondoc" [formGroup]="ocrForm" (ngSubmit)="onSubmit()">
      <div class="drop-container" (fileDropped)="onFileDropped($event)" DragAndDropDirective>
        <input type="file" id="fileDropRef" accept="image/*,application/pdf" (change)="fileBrowseHandler($event)" />
        <div class="file-input-container">
          <span>Déposer le fichier ici</span>
          <p>ou</p>
          <label class="end-btn" for="fileDropRef">Rechercher un fichier</label>
          <p>{{ file ? fileName : 'Aucun fichier sélectionné' }}</p>
        </div>
      </div>

      <div class="vizualisation" *ngIf="file && !fileName.endsWith('.pdf')">
        <p class="title">Visualiser l'image</p>
        <div class="img-container">
          <image-cropper
            [imageChangedEvent]="imageChangedEvent"
            [aspectRatio]="1"
            [resizeToWidth]="512"
            [maintainAspectRatio]="false"
            format="png"
            (imageCropped)="imageCropped($event)"
          ></image-cropper>
        </div>
      </div>
      <button class="end-btn submit-btn" type="submit" *ngIf="this.file && !this.translatedText">Lancer la détection du texte et la traduction</button>
    </form>
    <div class="translation" *ngIf="translatedText">
      <p class="title">Texte traduit</p>
      <div class="text-container">
        <div *ngIf="translatedText && translatedText.length > 0">
          {{ translatedText }}
        </div>
        <div class="audio-controls">
          <button *ngIf="showAudioControls" class="play-btn end-btn" type="button" (click)="isPlaying ? pause() : play()">
            <mat-icon>{{ isPlaying ? 'pause' : 'play_arrow' }}</mat-icon>
          </button>
          <div *ngIf="!showAudioControls">
            <app-loader></app-loader>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
